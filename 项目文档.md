# Actrue-tool 多功能工具集项目文档

## 项目概述

Actrue-tool 是一个基于 Next.js 的多功能工具集合平台，主要提供金融计算和生活实用工具。项目采用现代化的技术栈，提供科学准确的计算功能，帮助用户进行理财规划和健康管理。

## 技术栈

- **前端框架**: Next.js 15.2.4
- **UI 库**: React 19.0.0
- **样式**: Tailwind CSS 4.0
- **UI 组件**: Ant Design 5.25.3
- **图表库**: Chart.js 4.4.9 + react-chartjs-2 5.3.0
- **语言**: TypeScript 5.0
- **部署**: Cloudflare Workers (支持)
- **包管理**: pnpm

## 项目结构

```
Actrue-tool/
├── app/                          # Next.js App Router 目录
│   ├── function/                 # 核心功能函数
│   │   ├── drinkWarter.ts       # 饮水量计算函数
│   │   └── md2docs.ts           # Markdown转文档函数
│   ├── jr/                      # 金融计算器模块
│   │   ├── page.tsx            # 金融计算器集合页
│   │   ├── xz/page.tsx         # 现值计算器
│   │   ├── zz/page.tsx         # 终值计算器
│   │   ├── fl/page.tsx         # 复利计算器
│   │   ├── cxfl/page.tsx       # 储蓄复利计算器
│   │   ├── ll/page.tsx         # 利率计算器
│   │   └── snakeGame.tsx       # 贪吃蛇游戏
│   ├── life/                    # 生活工具模块
│   │   └── drinkwater/page.tsx # 饮水量计算器
│   ├── time/                    # 时间工具模块
│   │   └── page.tsx            # 周数进度查看器
│   ├── tool/                    # 实用工具模块
│   │   └── md2docs/page.tsx    # Markdown转文档工具
│   ├── page.tsx                # 主页
│   ├── layout.tsx              # 根布局
│   └── globals.css             # 全局样式
│   └── life/checkin-assistant/page.tsx # 打卡助手
├── docs/                        # 文档目录
│   └── 饮水量研究报告.md        # 饮水量计算科学依据
├── .trae/documents/             # 产品需求文档
│   └── 产品需求文档.md          # 完整的产品需求文档
└── package.json                # 项目配置
```

## 核心功能模块

### 1. 金融计算器工具集 (`/jr`)

#### 1.1 现值计算器 (`/jr/xz`)
- **功能**: 计算资金当前价值，支持复利现值计算
- **公式**: PV = FV/(1+r/n)^(nt)
- **参数**: 终值、年利率、年数、复利次数
- **特色**: 提供现值变化曲线图

#### 1.2 终值计算器 (`/jr/zz`)
- **功能**: 预测资金未来价值，支持复利终值计算
- **公式**: FV = PV×(1+r/n)^(nt)
- **参数**: 现值、年利率、年数、复利次数
- **特色**: 提供终值增长曲线图

#### 1.3 复利计算器 (`/jr/fl`)
- **功能**: 计算复利增长效果，支持不同复利次数
- **公式**: A = P(1+r/n)^nt
- **参数**: 本金、利率、复利次数、时间

#### 1.4 储蓄复利计算器 (`/jr/cxfl`)
- **功能**: 计算定期定额投资的复利增长效果，对比无复利情况
- **公式**: FV = P(1+r)^n + 定投×((1+r)^n-1)/r
- **参数**: 每月定投、年增长率、通胀率、初始本金、目标金额
- **特色**: 
  - 计算达到目标金额所需年数
  - 对比有复利和无复利的收益差异
  - 提供名义收益与实际收益对比图表
  - 支持通胀率调整

#### 1.5 利率计算器 (`/jr/ll`)
- **功能**: 根据现值和终值计算所需利率
- **公式**: r = n × ((FV/PV)^(1/(n×t)) - 1) × 100
- **参数**: 现值、终值、年数、复利次数

### 2. 生活工具模块

#### 2.1 饮水量计算器 (`/life/drinkwater`)
- **功能**: 基于科学公式计算个人每日最佳饮水量
- **科学依据**: 美国国家科学院医学研究所公式
- **参数**: 性别、年龄、体重、身高、活动系数
- **公式**:
  - 男性: 总水摄入量(升/天) = 1.58 - 0.007×年龄 + 0.024×体重(kg) + 0.018×身高(cm) + 0.203×活动系数
  - 女性: 总水摄入量(升/天) = 1.38 - 0.009×年龄 + 0.024×体重(kg) + 0.014×身高(cm) + 0.144×活动系数
- **活动系数**:
  - 久坐: 1.0
  - 轻度活动: 1.12
  - 中度活动: 1.27
  - 剧烈活动: 1.45

#### 2.2 打卡助手 (`/life/checkin-assistant`)
- **功能**: 习惯打卡工具，帮助用户养成良好的日常习惯
- **特色**:
  - 每日打卡功能，记录用户每天是否完成打卡
  - 连续打卡天数统计，显示用户的连续打卡记录
  - 打卡历史记录，查看用户的历史打卡情况
  - 月度打卡统计，可视化展示月度打卡完成率
   - 多事件支持，可以创建和管理不同的打卡事件
   - 事件目标设置，为每个事件独立设置每日/每周/每月打卡目标
### 3. 时间工具模块

#### 3.1 周数进度查看器 (`/time`)
- **功能**: 查看当前年份周数进度与时间分布
- **特色**: 
  - 可视化显示全年52周进度
  - 实时计算年度完成百分比
  - 直观的进度条展示

### 4. 实用工具模块

#### 4.1 Markdown转文档工具 (`/tool/md2docs`)
- **功能**: 将Markdown文档转换为结构化文档格式
- **特色**:
  - 解析Markdown标题结构
  - 生成层级化文档结构
  - 支持内容复制和JSON导出
  - 实时预览转换结果

### 5. 娱乐模块

#### 5.1 贪吃蛇游戏 (`/jr/snakeGame`)
- **功能**: 经典贪吃蛇游戏，休闲娱乐放松心情
- **特色**: 响应式设计，支持键盘控制

## 核心函数说明

### 1. 饮水量计算函数 (`drinkWarter.ts`)

```typescript
/**
 * 计算成年人每日所需饮水量（基于美国国家科学院医学研究所公式）
 * @param gender - 性别（'male'或'female'）
 * @param age - 年龄（岁）
 * @param weight - 体重（千克）
 * @param height - 身高（厘米）
 * @param activityFactor - 活动系数（久坐:1.0，轻度:1.12，中度:1.27，剧烈:1.45）
 * @returns {Object} 包含状态、消息和计算结果的对象
 */
export function calculateDailyWaterIntake(
  gender: 'male' | 'female',
  age: number,
  weight: number,
  height: number,
  activityFactor: number
): { states: boolean; message: string; data: number | null }
```

### 2. Markdown转文档函数 (`md2docs.ts`)

```typescript
/**
 * 将Markdown文档转换为结构化文档格式
 * @param markdown - Markdown字符串内容
 * @returns {Object} 包含状态、消息和转换结果的对象
 */
export async function md2docs(markdown: string): Promise<{
  states: boolean;
  message: string;
  data: DocsStructure[] | null;
}>
```

### 3. 打卡助手函数 (`checkinAssistant.ts`)

```typescript
/**
 * 打卡助手核心函数
 * 提供打卡记录管理、连续打卡统计等功能
 */

// 事件数据结构
export interface CheckinEvent {
  id: string;           // 事件ID
  name: string;         // 事件名称
  description: string;  // 事件描述
  target: {
    daily?: number;     // 每日目标打卡次数
    weekly?: number;    // 每周目标打卡次数
    monthly?: number;   // 每月目标打卡次数
  };
  createdAt: number;    // 创建时间戳
  isActive: boolean;    // 是否激活
}

// 打卡记录数据结构
export interface CheckinRecord {
  eventId: string;      // 关联的事件ID
  date: string;         // 日期 (YYYY-MM-DD格式)
  timestamp: number;    // 打卡时间戳
  completed: boolean;   // 是否完成打卡
}

/**
 * 获取所有事件
 * @returns 事件数组
 */
export function getCheckinEvents(): CheckinEvent[]

/**
 * 创建新事件
 * @param name 事件名称
 * @param description 事件描述
 * @param target 目标设置
 * @returns 创建的事件
 */
export function createCheckinEvent(
  name: string,
  description: string,
  target: { daily?: number; weekly?: number; monthly?: number }
): CheckinEvent

/**
 * 更新事件
 * @param eventId 事件ID
 * @param updates 更新内容
 * @returns 更新结果
 */
export function updateCheckinEvent(
  eventId: string,
  updates: Partial<CheckinEvent>
): { success: boolean; message: string; event?: CheckinEvent }

/**
 * 删除事件
 * @param eventId 事件ID
 * @returns 删除结果
 */
export function deleteCheckinEvent(eventId: string): { success: boolean; message: string }

/**
 * 获取所有打卡记录
 * @returns 打卡记录数组
 */
export function getCheckinRecords(): CheckinRecord[]

/**
 * 为指定事件打卡或取消打卡
 * @param eventId 事件ID
 * @param completed 是否完成打卡
 * @returns 操作结果
 */
export function toggleCheckinForEvent(eventId: string, completed?: boolean): { success: boolean; message: string }

/**
 * 计算指定事件的连续打卡天数
 * @param eventId 事件ID
 * @returns 连续打卡天数
 */
export function getConsecutiveCheckinsForEvent(eventId: string): number

/**
 * 获取指定事件的打卡历史记录
 * @param eventId 事件ID
 * @param limit 限制返回的记录数量，默认为30条
 * @returns 打卡历史记录数组
 */
export function getCheckinHistoryForEvent(eventId: string, limit?: number): CheckinRecord[]
```

## 设计特色

### 1. 用户界面设计
- **主色调**: 蓝色系（#3B82F6, #1E40AF）
- **辅助色**: 灰色系（#6B7280, #F3F4F6）
- **布局风格**: 卡片式设计，网格布局，响应式设计
- **交互效果**: 悬停动画，过渡效果

### 2. 响应式设计
- 移动优先的响应式设计
- 支持桌面端和移动端访问
- 针对触摸操作进行优化

### 3. 数据可视化
- 使用Chart.js提供专业的图表展示
- 支持线性图表、对比图表
- 实时数据更新和交互

## 部署说明

### 本地开发
```bash
# 安装依赖
pnpm install

# 启动开发服务器
pnpm dev

# 访问应用
# http://localhost:3000
```

### Cloudflare部署
```bash
# 构建和部署
pnpm run build
pnpm run deploy

# 或者一键部署
pnpm run go
```

## 项目特点

1. **科学准确**: 基于权威公式和研究数据，确保计算结果的准确性
2. **简单易用**: 直观的界面设计，无需注册即可使用所有功能
3. **完全免费**: 所有工具完全免费使用
4. **现代化技术**: 使用最新的React 19和Next.js 15技术栈
5. **响应式设计**: 完美支持各种设备和屏幕尺寸
6. **数据可视化**: 提供专业的图表展示和数据分析
7. **模块化架构**: 清晰的代码结构，易于维护和扩展

## 未来规划

1. 添加更多金融计算工具（如贷款计算器、投资回报率计算器等）
2. 增加用户数据本地存储功能
3. 添加更多生活实用工具
4. 优化移动端体验
5. 添加多语言支持
6. 集成更多数据可视化功能

## 开发团队

本项目由Solo Coding AI助手开发完成，遵循现代化的开发规范和最佳实践。

---

© 2024 Actrue-tool. 让科学计算成为您生活的助手。